<form v-on:submit.prevent="onSubmit">
    <div
        v-if="!parentData || !parentData.hidFields || !parentData.hidFields.includes('id')"
    >
        <div class="form-group">
            <label class="form-label">Id</label>
            <input
                disabled
                type="number"
                class="form-control"
                v-model="enrolment.id"
            />
        </div>
        <br />
    </div>
    <div
        v-if="!parentData || !parentData.hidFields || !parentData.hidFields.includes('internalMark')"
    >
        <div class="form-group">
            <label class="form-label">Internal Mark</label>
            <input
                type="number"
                class="form-control"
                v-model="enrolment.internalMark"
            />
        </div>
        <br />
    </div>
    <div
        v-if="!parentData || !parentData.hidFields || !parentData.hidFields.includes('examMark')"
    >
        <div class="form-group">
            <label class="form-label">Exam Mark</label>
            <input
                type="number"
                class="form-control"
                v-model="enrolment.examMark"
            />
        </div>
        <br />
    </div>
    <div
        v-if="!parentData || !parentData.hidFields || !parentData.hidFields.includes('finalGrade')"
    >
        <div class="form-group">
            <label class="form-label">Final Grade</label>
            <input
                disabled
                type="text"
                class="form-control"
                v-model="enrolment.finalGrade"
            />
        </div>
        <br />
    </div>
    <div
        v-if="!parentData || !parentData.hidFields || !parentData.hidFields.includes('finalMark')"
    >
        <div class="form-group">
            <label class="form-label">Final mark</label>
            <input
                disabled
                type="number"
                class="form-control"
                v-model="enrolment.finalMark"
            />
        </div>
        <br />
    </div>

    <!-- Date range -->
    <div
        v-if="!parentData || !parentData.hidFields || !parentData.hidFields.includes('enrolmentDate')"
    >
        <div class="form-group">
            <label class="form-label">Date range</label>
            <date-range-picker
                ref="picker"
                v-model="dateRange"
                :options="dateRangeOptions"
            >
                <template v-slot:input="picker" class="input_date">
                    {{ picker.startDate | date }} - {{ picker.endDate | date }}
                </template>
            </date-range-picker>
        </div>
        <br />
    </div>

    <div
        v-if="!parentData || !parentData.hidFields || !parentData.hidFields.includes('student')"
    >
        <div
            class="
                d-flex
                flex-wrap
                justify-content-between
                align-items-end
                form-group
            "
        >
            <div class="px-0 col-md-2.5">
                <label class="form-label">Student ID</label>
                <input
                    type="text"
                    class="form-control"
                    v-model="studentId"
                    v-on:change="getStudentById"
                />
            </div>
            <div class="px-0 col-md-7">
                <label class="form-label">Student</label>
                <input
                    disabled
                    type="text"
                    class="form-control"
                    v-bind:value="studentQuickView"
                />
            </div>
            <button
                type="button"
                class="btn btn-outline-danger"
                v-on:click="unlinkStudent"
            >
                Unlink
            </button>
            <button
                type="button"
                class="btn btn-outline-secondary"
                v-on:click="formSubModuleStudentSeen = !formSubModuleStudentSeen"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="bi bi-chevron-down"
                    viewBox="0 0 16 16"
                >
                    <path
                        fill-rule="evenodd"
                        d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"
                    />
                </svg>
            </button>
        </div>
        <div class="form-group" v-if="formSubModuleStudentSeen">
            <form-sub-module-student
                v-bind:parentData="dataSubForm"
            ></form-sub-module-student>
        </div>
        <br />
    </div>
    <div
        v-if="!parentData || !parentData.hidFields || !parentData.hidFields.includes('courseModule')"
    >
        <div
            class="
                d-flex
                flex-wrap
                justify-content-between
                align-items-end
                form-group
            "
        >
            <div class="px-0 col-md-2.5">
                <label class="form-label">Course module ID</label>
                <input
                    type="text"
                    class="form-control"
                    v-model="courseModuleId"
                    v-on:change="getCourseModuleById"
                />
            </div>
            <div class="px-0 col-md-7">
                <label class="form-label">Course module</label>
                <input
                    disabled
                    type="text"
                    class="form-control"
                    v-bind:value="courseModuleQuickView"
                />
            </div>
            <button
                type="button"
                class="btn btn-outline-danger"
                v-on:click="unlinkCourseModule"
            >
                Unlink
            </button>
            <button
                type="button"
                class="btn btn-outline-secondary"
                v-on:click="formSubModuleCourseModuleSeen = !formSubModuleCourseModuleSeen"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="16"
                    fill="currentColor"
                    class="bi bi-chevron-down"
                    viewBox="0 0 16 16"
                >
                    <path
                        fill-rule="evenodd"
                        d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"
                    />
                </svg>
            </button>
        </div>
        <div class="form-group" v-if="formSubModuleCourseModuleSeen">
            <form-sub-module-course-module
                v-bind:parentData="dataSubForm"
            ></form-sub-module-course-module>
        </div>
        <br />
    </div>

    <div class="d-flex justify-content-end mx-0 row">
        <div class="col-md-9"></div>
        <button type="button" class="btn btn-secondary">Reset</button>
        <button class="ml-2 btn btn-primary">Save</button>
    </div>
    <Toasts></Toasts>
</form>
